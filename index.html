<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>보드게임 동아리</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>

<body>
  <!-- ✅ 배경(포스터) -->
  <div class="bg" aria-hidden="true"></div>

  <!-- ✅ 화면 위 콘텐츠가 더 생기더라도 footer가 가리지 않게 여유 공간 확보 -->
  <main class="wrap" aria-label="보드게임 동아리 메인">
    <!-- 지금은 포스터가 메인이므로 비워둬도 됨 -->
    <!-- 추후: 공지 카드/이번주 일정 등 이 영역에 자유롭게 추가 가능 -->
  </main>

  <!-- =========================
       ✅ 하단 고정 Footer 메뉴
       - [동아리 소개] [금주의 보드게임] [참여신청]
       - 버튼 클릭 → 동일한 카드 팝업(모달) 열기
       ========================= -->
  <footer class="footer-nav" aria-label="하단 메뉴">
    <!--
      data-modal="intro|weekly|join"
      JS에서 이 값을 읽어서 어떤 내용을 보여줄지 결정한다.
    -->
    <button type="button" class="footer-btn" data-modal="intro">동아리 소개</button>
    <button type="button" class="footer-btn" data-modal="weekly">금주의 보드게임</button>
    <button type="button" class="footer-btn primary" data-modal="join">참여신청</button>
  </footer>


  <!-- =========================
       ✅ 공용 모달(하나로 통합)
       - 3개 메뉴가 모두 "같은 카드 UI"를 공유
       - 안쪽 내용만 바꿔서 보여준다.
       ========================= -->
  <div class="modal" id="mainModal" aria-hidden="true">
    <!-- ✅ dim(배경 클릭 시 닫기) -->
    <div class="modal-backdrop" id="modalBackdrop"></div>

    <!-- ✅ 실제 카드 -->
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <!-- ✅ 제목은 JS에서 상황에 맞게 변경 -->
      <h3 class="modal-title" id="modalTitle">제목</h3>

      <!-- ✅ 공용 안내/경고 메시지(주로 참여신청 검증에서 사용) -->
      <p class="modal-warning" id="modalWarning" style="display:none;">
        모두 적으셔야 합니다.
      </p>

      <!-- =====================================================
           1) 동아리 소개 뷰 (확인 버튼만 있음)
           ===================================================== -->
      <section id="viewIntro" class="modal-view" hidden>
        <p class="modal-text">
          우리랜드는 3청에서 시작한 보드게임 동아리 입니다.<br/>
          지금은 중앙동아리의 지원으로 모든 청년이 참여할 수 있습니다.
        </p>

        <p class="modal-text">
          우리랜드는 함께 모여 보드게임을 즐기며<br/> 친목을 다지는 모임입니다.<br/>
          초보자도 쉽게 참여할 수 있도록 룰 설명과 진행을 도와드립니다.
        </p>

        <ul class="modal-list">
          <li>정기 모임: 매주 토요일 13:00</li>
          <li>장소: 드림센터 1011호</li>
          <li>대상: 누구나</li>
        </ul>

        <div class="modal-actions">
          <!-- ✅ 소개/금주게임은 "확인"만 누르면 닫힘 -->
          <button type="button" class="btn" data-action="close">확인</button>
        </div>
      </section>

      <!-- =====================================================
           2) 금주의 보드게임 뷰 (확인 버튼만 있음)
           ✅ (변경) 하드코딩 3칸 제거 → JS가 API로 받아서 채움
           ===================================================== -->
      <section id="viewWeekly" class="modal-view" hidden>
        <p class="modal-text">
          이번 주 추천 보드게임입니다!<br/>
          (일요일 기준으로 자동 갱신됩니다)
        </p>

        <!-- ✅ (추가) "이번 주 시작일"을 작은 글씨로 분리해서 표시 -->
        <p class="modal-subtitle" id="weekStartDate" aria-live="polite"></p>

        <!-- ✅ (추가) 로딩/에러 메시지 영역 -->
        <p class="weekly-status" id="weeklyStatus" aria-live="polite">불러오는 중...</p>

        <!-- ✅ 3칸 카드 컨테이너 (JS가 여기 안에 3개를 그린다) -->
        <div class="weekly-cards" id="weeklyCards"></div>

        <div class="modal-actions">
          <button type="button" class="btn" data-action="close">확인</button>
        </div>
      </section>

      <!-- =====================================================
           3) 참여 신청 뷰
           ✅ 변경점:
           - 필수 입력(부서/이름/연락처) 완료 후 아래 영역이 펼쳐지며
             시간대(게임 난이도 세션) 복수 선택 체크박스가 등장
           - 1개 이상 선택해야 "참여" 버튼 활성화
           ===================================================== -->
      <section id="viewJoin" class="modal-view" hidden>
        <form id="joinForm">
          <label class="field">
            <span class="field-label">소속부서</span>
            <select id="deptSelect" class="field-input" required>
              <option value="">선택하세요</option>
              <option value="1청년부">1청년부</option>
              <option value="2청년부">2청년부</option>
              <option value="3청년부">3청년부</option>
              <option value="4청년부">4청년부</option>
              <option value="그 외">그 외</option>
            </select>
          </label>

          <!-- ✅ '그 외' 선택시에만 표시 -->
          <label class="field" id="deptEtcField" style="display:none;">
            <span class="field-label">소속부서(직접입력)</span>
            <input id="deptEtcInput" class="field-input" type="text" placeholder="예: 신혼다락방" />
          </label>

          <label class="field">
            <span class="field-label">이름</span>
            <input id="nameInput" class="field-input" type="text" placeholder="홍길동" required />
          </label>

          <label class="field">
            <span class="field-label">연락처</span>
            <input id="phoneInput" class="field-input" type="tel" inputmode="numeric" placeholder="01012345678" required />
          </label>

          <!-- =====================================================
               ✅ (추가) 시간대/게임 선택 영역
               - 기본은 숨김(display:none)
               - JS에서 필수 입력이 모두 채워지면 펼쳐서 보여준다.
               - 체크박스는 복수 선택 가능
               - 1개 이상 선택해야 submit 가능
               ===================================================== -->
          <div class="slot-panel" id="slotPanel" style="display:none;">
            <p class="modal-text" style="margin-top: 8px;">
              참여할 시간대를 선택해주세요. (복수 선택 가능)
            </p>

            <!-- ✅ JS에서 금주의 게임 제목을 같이 넣고 싶으면 아래 span을 채우면 됨 -->
            <p class="modal-subtitle" id="slotHint" aria-live="polite">
              운영 시간: EASY 13~14 / NORMAL 14~16 / HARD 16~18
            </p>

            <label class="slot-item">
              <input type="checkbox" id="slotEasy" name="timeSlots" value="EASY" />
              <span>EASY (13:00~14:00)</span>
            </label>

            <label class="slot-item">
              <input type="checkbox" id="slotNormal" name="timeSlots" value="NORMAL" />
              <span>NORMAL (14:00~16:00)</span>
            </label>

            <label class="slot-item">
              <input type="checkbox" id="slotHard" name="timeSlots" value="HARD" />
              <span>HARD (16:00~18:00)</span>
            </label>

            <!-- ✅ 체크박스 안내(1개 이상 선택 필요) -->
            <p class="modal-warning" id="slotWarning" style="display:none; margin-top: 10px;">
              시간대를 1개 이상 선택해주세요.
            </p>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn ghost" id="cancelBtn">취소</button>

            <!-- ✅ (변경) 기본은 비활성화
                 - JS에서 (필수입력 OK && 슬롯 1개 이상 체크)일 때 enabled 처리 -->
            <button type="submit" class="btn" id="submitBtn" disabled>참여</button>
          </div>
        </form>
      </section>

    </div>
  </div>

  <!-- ✅ 캐시 무효화(중요): v 값만 바꾸면 브라우저가 새 JS를 무조건 받음 -->
  <script src="./js/app.js?v=20260217-3"></script>
</body>
</html>
